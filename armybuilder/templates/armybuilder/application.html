{% load staticfiles %}

<!DOCTYPE html>
<html lang="eng">
    <head>
        <meta charset="utf=8">
        <title>Army Builder</title>

        {% load compress %}
        {% compress css %}
        <link rel="stylesheet" type="text/x-scss" href="{% static "armybuilder/styles/armybuilder.scss" %}" />
        <link rel="stylesheet" type="text/x-scss" href="{% static "armybuilder/styles/armylist.scss" %}" />
        {% endcompress %}

        {% compress js %}
        <script src="{% static "armybuilder/scripts/jquery-3.0.0.min.js" %}"></script>
        <script src="{% static "armybuilder/scripts/jsrender.min.js" %}"></script>
        <script src="{% static "armybuilder/scripts/armybuilder-controller.js" %}"></script>
        <script src="{% static "armybuilder/scripts/armybuilder-webstorage.js" %}"></script>
        {% endcompress %}
    </head>

    <body>
        <header></header>
        <main id="armybuilderPage">
            <div id="headerPanel">
                Torkel's Army Builder - <b><i>UNDER CONSTRUCTION</i></b>
            </div>
            <div id="mainPanel">
                <div id="leftPanel">
                    <div id="leftPanelHeader">
                        <div id="forceListHeader">
                            <div class="forceListReturnBtn"><div class="buttonWrapper"><div>Select an army</div></div></div>
                            <div class="forceSectionBtn" data-section="unitList"><div class="buttonWrapper"><div>Units</div></div></div>
                            <div class="forceSectionBtn" data-section="monList"><div class="buttonWrapper"><div>Monsters & Warengines</div></div></div>
                            <div class="forceSectionBtn" data-section="heroList"><div class="buttonWrapper"><div>Heroes</div></div></div>
                        </div>
                    </div>
                    <div id="leftPanelBody">
                        <div id="armyChoicePanel"></div>
                        <div id="unitChoicePanel"></div>
                    </div>
                    <div id="leftPanelFooter"></div>
                </div>
                <div id="rightPanel">
                    <div id="armylistPanel">
                        <header>
                            <div id="armylistTitle" class="rightHeaderField">
                                <div></div>
                                <textarea id="titleChange" style="display:none;" rows="1" cols="30" maxlength="30"></textarea>
                            </div>
                            <div class="rightHeaderField">
                                <button id="primaryArmyBtn" class="dropdownBtn"></button>
                                <ul id="primaryArmyOptions" class="dropdownMenu"></ul>
                            </div>
                            <div class="rightHeaderField">
                                <button id="armylistPoints" class="dropdownBtn"></button>
                                <ul id="armylistPointsOptions" class="dropdownMenu">
                                    <li><a href="#">1500</a></li>
                                    <li><a href="#">2000</a></li>
                                    <li><a href="#">2500</a></li>
                                </ul>
                            </div>
                        </header>
                        <section class="scrollPanel">
                            <div>
                                <div class="scrollContent"></div>
                                <div class="topScroll"></div>
                                <div class="botScroll"></div>
                            </div>
                        </section>
                        <footer>
                            <div id="alPointsTotal">
                            </div>
                            <div id="alBtnPanel">
                            </div>
                        </footer>
                    </div>
                    <div id="rightPanelFooter">
                        <div id="statsTable"></div>
                    </div>
                </div>
            </div>
            <div id="footerPanel">
                <div id="footerLeftPanel"></div>
                <div id="footerCenterPanel"></div>
                <div id="footerRightPanel">
                    <div id="mainPdfBtn">
                        <span class="riseTooltip"></span>
                        <button class="pdfBtn">PDF</button>
                    </div>
                </div>
            </div>
        </main>
        <footer></footer>
    </body>

    <script id="forceListTmpl" type="text/x-jsrender">
<table id="unitList" data-army={?>key?} class="forceList">
    <thead>
        <th class="unitName"></th>
        <th>Troop</th>
        <th>Regiment</th>
        <th>Horde</th>
        <th>Legion</th>
    </thead>
    <tbody>
    {?props units?}
        {?if ~isUnit(prop)?}
            <tr>
                <td class="unitName">{?>prop.name?}</td>
                {?include ~form="Troop" tmpl="#btnTmpl"/?}
                {?include ~form="Regiment" tmpl="#btnTmpl"/?}
                {?include ~form="Horde" tmpl="#btnTmpl"/?}
                {?include ~form="Legion" tmpl="#btnTmpl"/?}
            </tr>
        {?/if?}
    {?/props?}
    </tbody>
</table>
<table id="monList" data-army={?>key?} class="forceList">
    <thead>
        <th class="unitName"></th>
        <th>Monster</th>
        <th>War Eng</th>
    </thead>
    <tbody>
    {?props units?}
        {?if ~isMon(prop)?}
            <tr>
                <td class="unitName">{?>prop.name?}</td>
                {?include ~form="Monster" tmpl="#btnTmpl"/?}
                {?include ~form="Warengine" tmpl="#btnTmpl"/?}
            </tr>
        {?/if?}
    {?/props?}
    </tbody>
</table>
<table id="heroList" data-army={?>key?} class="forceList">
    <thead>
        <th class="unitName"></th>
        <th>Hero</th>
    </thead>
    <tbody>
    {?props units?}
        {?if ~isHero(prop)?}
            <tr>
                <td class="unitName">{?>prop.name?}</td>
                {?include ~form="Hero" tmpl="#btnTmpl"/?}
            </tr>
        {?/if?}
    {?/props?}
    </tbody>
</table>
<div id="leftPanelTopScroll" class="topScroll">
</div>
<div class="botScroll">
</div>
    </script>

    <script id="btnTmpl" type="text/x-jsrender">
    {?if prop[~form]?}
    <td><nav><a href="#" class="unitBtn" data-key={?>key?} data-form={?:~form?}>{?>prop[~form].Pts?}</a></nav></td>
    {?else?}
    <td><nav><a href="#" class="emptyBtn" >-</a></nav></td>
    {?/if?}
    </script>

    <script id="armyChoicePanelTmpl" type="text/x-jsrender">
<div class="armyBtn" data-army={?:key?}><div class="buttonWrapper"><div>{?:name?}</div></div></div>
    </script>

    <script id="primaryArmyTmpl" type="text/x-jsrender">
<li><a href="#" data-army={?:key?}>{?:name?}</a></li>
    </script>

    <script id="armylistUnitTmpl" type="text/x-jsrender">
<div class="alUnit" data-unit-id={?>id?}>
    <div class="alUnitOpt">UnitOpt</div>
    <div class="alUnitType">{?:form?}<br>{?:~typeFormat(type)?}</div>
    <div class="alUnitPts">{?:stats.Pts?}</div>
    <div class="alUnitName">{?>name?}</div>
    <div class="alUnitStats">
        {?include stats tmpl="#unitStatsTmpl"/?}
    </div>
    <div class="alUnitBtnSet">
        <div class="alUnitBtnRm"></div>
        <div class="alUnitBtnOpt"></div>
    </div>
</div>
    </script>

    <script id="unitStatsTmpl" type="text/x-jsrender">
<table>
    <thead>
        <th class="alsp">Sp</th>
        <th class="alme">Me</th>
        <th class="alra">Ra</th>
        <th class="alde">De</th>
        <th class="alat">Att</th>
        <th class="alne">Ne</th>
    </thead>
    <tbody>
        <td class="alsp">{?>Sp?}</td>
        <td class="alme">{?>Me?}</td>
        <td class="alra">{?>Ra?}</td>
        <td class="alde">{?>De?}</td>
        <td class="alat">{?>Att?}</td>
        <td class="alne">{?>Ne?}</td>
    </tbody>
</table>
    </script>

    <script id="statsTmpl" type="text/x-jsrender">
<table>
    <thead>
        <tr><th>Total number of units: {?:count?}</th><th legal="{?:legalPts?}">{?:points?}/{?:pointsLimit?} Points</th></tr>
    </thead>
    <tbody>
        <tr><td>{?:Legion?} Legions</td><td legal="{?:legalHer?}">{?:Hero?} Heroes ({?:slotsHer?} slots left)</td></tr>
        <tr><td>{?:Horde?} Hordes</td><td legal="{?:legalMon?}">{?:Monster?} Monsters ({?:slotsMon?} slots left)</td></tr>
        <tr><td>{?:Regiment?} Regiments</td><td legal="{?:legalWen?}">{?:Warengine?} War Engines ({?:slotsWen?} slots left)</td></tr>
        <tr><td legal="{?:legalTro?}">{?:Troop?} Troops ({?:slotsTro?} slots left)</td><td legal="{?:legalAllies?}">{?:allies?}% Allies</td></tr>
    </tbody>
</table>
    </script>
</html>
