{% load staticfiles %}

<!DOCTYPE html>
<html lang="eng">
    <head>
        <meta charset="utf=8">
        <title>Army Builder</title>

        {% load compress %}
        {% compress css %}
        <link rel="stylesheet" type="text/x-scss" href="{% static "armybuilder/styles/armybuilder.scss" %}" />
        <link rel="stylesheet" type="text/x-scss" href="{% static "armybuilder/styles/armylist.scss" %}" />
        {% endcompress %}

        {% compress js %}
        <script src="{% static "armybuilder/scripts/jquery-3.0.0.min.js" %}"></script>
        <script src="{% static "armybuilder/scripts/jsrender.min.js" %}"></script>
        <script src="{% static "armybuilder/scripts/armybuilder-controller.js" %}"></script>
        <script src="{% static "armybuilder/scripts/armybuilder-webstorage.js" %}"></script>
        {% endcompress %}
    </head>

    <body>
        <header>
            Torkel's Army Builder - <b><i>UNDER CONSTRUCTION</i></b>
        </header>
        <main id="armybuilderPage">
            <div id="leftPanel">
                <header>
                    <div id="forceListHeader">
                        <div class="forceListReturnBtn"><div class="buttonWrapper"><div>Select an army</div></div></div>
                    </div>
                </header>
                <section id="armyChoicePanel"></section>
                <section id="unitOptions"></section>
            </div>
            <div id="rightPanel">
                <div id="armylistPanel">
                    <header>
                        <div id="armylistTitle" class="rightHeaderField">
                            <div></div>
                            <textarea id="titleChange" style="display:none;" rows="1" cols="30" maxlength="30"></textarea>
                        </div>
                        <div class="rightHeaderField">
                            <button id="primaryArmyBtn" class="dropdownBtn"></button>
                            <ul id="primaryArmyOptions" class="dropdownMenu"></ul>
                        </div>
                        <div class="rightHeaderField">
                            <button id="armylistPoints" class="dropdownBtn"></button>
                            <ul id="armylistPointsOptions" class="dropdownMenu">
                                <li><a href="#">1500</a></li>
                                <li><a href="#">2000</a></li>
                                <li><a href="#">2500</a></li>
                            </ul>
                        </div>
                    </header>
                    <section></section>
                    <footer>
                        <div id="alPointsTotal">
                        </div>
                        <div id="alBtnPanel">
                        </div>
                    </footer>
                </div>
                <div id="statsTable"></div>
            </div>
        </main>
        <footer>
            <div id="footerLeftPanel"></div>
            <div id="footerCenterPanel"></div>
            <div id="footerRightPanel">
                <div id="mainPdfBtn">
                    <span class="riseTooltip"></span>
                    <button class="pdfBtn">PDF</button>
                </div>
            </div>
        </footer>
    </body>

    <script id="unitOptionsTmpl" type="text/x-jsrender">
<header>
    <div>Troop</div>
    <div>Regiment</div>
    <div>Horde</div>
    <div>Legion</div>
</header>
{?props units?}
    {?if ~isUnit(prop)?}
        <nav>
            <label>{?>prop.name?}</label>
            {?include ~form="Troop" tmpl="#btnTmpl"/?}
            {?include ~form="Regiment" tmpl="#btnTmpl"/?}
            {?include ~form="Horde" tmpl="#btnTmpl"/?}
            {?include ~form="Legion" tmpl="#btnTmpl"/?}
        </nav>
    {?/if?}
{?/props?}
{?if ~hasWen(units)?}
    <header>
        <div>War Engine</div>
    </header>
    {?props units?}
        {?if ~isWen(prop)?}
            <nav>
                <label>{?>prop.name?}</label>
                {?include ~form="Warengine" tmpl="#btnTmpl"/?}
            </nav>
        {?/if?}
    {?/props?}
{?/if?}
{?if ~hasMon(units)?}
    <header>
        <div>Monster</div>
    </header>
    {?props units?}
        {?if ~isMon(prop)?}
            <nav>
                <label>{?>prop.name?}</label>
                {?include ~form="Monster" tmpl="#btnTmpl"/?}
            </nav>
        {?/if?}
    {?/props?}
{?/if?}
<header>
    <div>Hero</div>
</header>
{?props units?}
    {?if ~isHero(prop)?}
        <nav>
            <label>{?>prop.name?}</label>
            {?include ~form="Hero" tmpl="#btnTmpl"/?}
        </nav>
    {?/if?}
{?/props?}
    </script>

    <script id="btnTmpl" type="text/x-jsrender">
{?if prop[~form]?}
    <div data-key={?>key?} data-form={?:~form?}>{?>prop[~form].Pts?}</div>
{?else?}
    <div class="invalid"></div>
{?/if?}
    </script>

    <script id="armyChoicePanelTmpl" type="text/x-jsrender">
<div class="armyBtn" data-army={?:key?}><div class="buttonWrapper"><div>{?:name?}</div></div></div>
    </script>

    <script id="primaryArmyTmpl" type="text/x-jsrender">
<li><a href="#" data-army={?:key?}>{?:name?}</a></li>
    </script>

    <script id="armylistUnitTmpl" type="text/x-jsrender">
<div class="alUnit" data-unit-id={?>id?}>
    <div class="alUnitOpt">UnitOpt</div>
    <div class="alUnitType">{?:form?}
        <div style="display:none;">{?:~typeFormat(type)?}</div>
        <div class="alUnitBtnSet">
            <div class="alUnitBtnRm"></div>
            <div class="alUnitBtnOpt"></div>
        </div>
    </div>
    <div class="alUnitPts">{?:stats.Pts?}</div>
    <div class="alUnitName">{?>name?}</div>
    <div class="alUnitStats">
        {?include stats tmpl="#unitStatsTmpl"/?}
    </div>
</div>
    </script>

    <script id="unitStatsTmpl" type="text/x-jsrender">
<table>
    <thead>
        <th class="alsp">Sp</th>
        <th class="alme">Me</th>
        <th class="alra">Ra</th>
        <th class="alde">De</th>
        <th class="alat">Att</th>
        <th class="alne">Ne</th>
    </thead>
    <tbody>
        <td class="alsp">{?>Sp?}</td>
        <td class="alme">{?>Me?}</td>
        <td class="alra">{?>Ra?}</td>
        <td class="alde">{?>De?}</td>
        <td class="alat">{?>Att?}</td>
        <td class="alne">{?>Ne?}</td>
    </tbody>
</table>
    </script>

    <script id="statsTmpl" type="text/x-jsrender">
<table>
    <thead>
        <tr><th>Total number of units: {?:count?}</th><th legal="{?:legalPts?}">{?:points?}/{?:pointsLimit?} Points</th></tr>
    </thead>
    <tbody>
        <tr><td>{?:Legion?} Legions</td><td legal="{?:legalHer?}">{?:Hero?} Heroes ({?:slotsHer?} slots left)</td></tr>
        <tr><td>{?:Horde?} Hordes</td><td legal="{?:legalMon?}">{?:Monster?} Monsters ({?:slotsMon?} slots left)</td></tr>
        <tr><td>{?:Regiment?} Regiments</td><td legal="{?:legalWen?}">{?:Warengine?} War Engines ({?:slotsWen?} slots left)</td></tr>
        <tr><td legal="{?:legalTro?}">{?:Troop?} Troops ({?:slotsTro?} slots left)</td><td legal="{?:legalAllies?}">{?:allies?}% Allies</td></tr>
    </tbody>
</table>
    </script>
</html>
